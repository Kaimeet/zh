<!DOCTYPE html>
<html lang="zh-cn" xmlns:th="http://www.thymeleaf.org" style="overflow: hidden;">
<head>
    <title>管理成本系统</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="shortcut icon" th:href="@{/static/images/oupailogs.ico}">
    <link rel="stylesheet" th:href="@{/static/layui/css/layui.css}"/>
    <link rel="stylesheet" th:href="@{/static/css/bootstrap/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/static/css/bootstrap/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/bootstrap/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/bootstrap/bootstrap-table.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/bootstrap/bootstrap-table.css}" />
    <link rel="stylesheet" th:href="@{/static/css/yexu.css}">

    <link rel="stylesheet" th:href="@{/static/css/app.css}">
    <link rel="stylesheet" th:href="@{/static/css/font.css}">
    <link rel="stylesheet" th:href="@{/static/awesome/css/font-awesome.min.css}">
    <link th:href="@{/static/css/style-responsive.css}" rel="stylesheet">
    <link th:href="@{/static/css/Process/quotationProcessReview.css}" rel="stylesheet">

</head>
<body class="sticky-header" id="loading1">
<!-- left side start-->
<div th:replace="Menu/menu::asid(${menus},'bjlc','bjlc_lclb')"></div>

<!-- left side end-->
<div class="main-content" >
    <!-- header start-->
    <div class="navbar" th:replace="Menu/header::header(${user})"></div>
    <!-- header end-->
    <!--body wrapper start-->
    <div class="wrapper wrapper-content animated fadeInUp clear ">
        <div class="">
            <div class="seccnt">
                <div class="ibox">
                    <div class="ibox-content ibox-content2 col-xs-12" style="overflow-y: auto;">
                        <p>
                            <span>流程审核</span>
                        </p>
                        <div class="col-xs-12 search-condition">
                            <div th:if="${disableFlag==1}" class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style="">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">报价单号：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">报价单号</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;" th:text="${quotationProcess.quotationNumber}"></span>
                                </div>
                            </div>

                            <div th:if="${disableFlag==1}" class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style=" ">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">项目名称：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">项目名称</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;" th:text="${quotationProcess.projectName}"></span>
                                </div>
                            </div>

                            <div  th:if="${disableFlag==1}"  class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style=" ">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">申请部门：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">申请部门</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;" th:text="${quotationProcess.departmentName}"></span>
                                </div>
                            </div>
                            <div  th:if="${disableFlag==1}"  class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style=" ">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">报价方式：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">报价方式</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;" th:text="${quotationProcess.quotationMethodMiddle}"></span>
                                </div>
                            </div>
                            <div  th:if="${disableFlag==1}"  class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style=" ">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">加急状态：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">加急状态</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;" th:text="${quotationProcess.urgentStateName}"></span>
                                </div>
                            </div>
                            <div th:if="${disableFlag==1}" class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style=" ">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">回复日期：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">回复日期</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;"  th:text="${quotationProcess.replyDateMiddle}"></span>
                                </div>
                            </div>
                            <div th:if="${disableFlag==1}" class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style=" ">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">业务员姓名：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">业务员姓名</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;" th:text="${quotationProcess.employeeName}"></span>
                                </div>
                            </div>

                            <!--工程报价表单需要填的表单-->
                            <div th:if="${taskName=='工程报价' || taskName=='技术部图纸组'  || taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" id="table1" style="position: relative">
                                <p class="col-lg-1 col-md-1 col-xs-12 col-sm-12 nopadding" style="position: absolute;top: 10px;">报价申请</p>
                                <table id="reportTable1" class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                                </table>
                            </div>

                            <div th:if="${taskName=='技术部图纸组'  || taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" style="">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">报价相关附件：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">报价相关附件</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;"></span>
                                </div>
                            </div>
                            <div th:if="${taskName=='技术部图纸组'  || taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" style="">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;"></label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title"></label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <ul class="otherfile-list4 ">
                                        <li th:if="${quotationFilesApprove!=null && quotationFilesApprove.size()>0}" th:each="e,eStat:${quotationFilesApprove}" class="file-item">
                                            <a style="cursor: pointer;" th:title="${e.fileName}" th:text="${e.fileName}"    th:onclick="'downloadFile(\''+${e.id}+'\')'"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!--技术部图纸组需要填的表单-->
                            <div th:if="${taskName=='技术部图纸组' }" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" id="table3" style="position: relative">
                                <p class="col-lg-1 col-md-1 col-xs-12 col-sm-12 nopadding" style="position: absolute;top: 10px;">图纸组审核</p>
                                <table id="reportTable3" class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                                </table>
                            </div>

                            <div th:if="${taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" style="">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">图纸相关附件：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">图纸相关附件</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <span style="line-height: 34px;"></span>
                                </div>
                            </div>
                            <div th:if="${taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" style="">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;"></label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title"></label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <ul class="otherfile-list4 ">
                                        <li th:if="${quotationFilesPic!=null && quotationFilesPic.size()>0}" th:each="e,eStat:${quotationFilesPic}" class="file-item">
                                            <a style="cursor: pointer;" th:title="${e.fileName}" th:text="${e.fileName}"   th:onclick="'downloadFile(\''+${e.id}+'\')'"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!--成本组表单需要填的表单-->
                            <div th:if="${taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" id="table2" style="position: relative"> <!--th:if="${taskName=='技术部成本组'}"-->
                                <p class="col-lg-1 col-md-1 col-xs-12 col-sm-12 nopadding" style="position: absolute;top: 10px;">成本组审核</p>
                                <table id="reportTable2" class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                                </table>
                            </div>
                            <!--技术部需要填的表单--> <!---->
                            <div th:if="${taskName=='工程报价' && (returnFlowFlag==3 || returnFlowFlag==1) ||taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导'}" class="col-lg-12 col-md-12 col-xs-12 col-sm-12 nopadding" id="table4" style="position: relative"> <!--th:if="${taskName=='技术部成本组'}"-->
                                <p class="col-lg-1 col-md-1 col-xs-12 col-sm-12 nopadding hidden" id="redultTitle" style="position: absolute;top: 10px;">报价结果审核</p>
                                <table id="reportTable4" class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                                </table>
                            </div>
                            <div th:if="${count==0 && flag==1 }" class="col-lg-6 col-md-6 col-xs-12 col-sm-12 nopadding" style="margin-top:30px">
                                <label class="col-md-3 text-right visible-lg visible-md title" style="width:150px;line-height: 34px;">驳回节点：</label>
                                <label class="col-xs-12 text-left visible-xs visible-sm nopadding title">驳回节点</label>
                                <div class="col-md-5 col-xs-12 nopadding">
                                    <select  id="returnFlowTask"   class="form-control parsley-validated" name="d"  >
                                        <option value="0">---请选择---</option>
                                        <option th:if="${taskName=='技术部图纸组' || taskName=='技术部成本组' || taskName=='技术部工艺组'  }" value="1" >工程报价</option>
                                        <option th:if="${taskName=='工程报价' && returnFlowFlag==1 || taskName=='技术部成本组' || taskName=='技术部工艺组' || taskName=='技术部领导' }" value="2" >技术部图纸组</option>
                                        <option th:if="${taskName=='技术部工艺组' || taskName=='技术部领导' }" value="3" >技术部成本组</option>
                                        <option th:if="${taskName=='技术部领导' }" value="4">技术部工艺组</option>
                                        <option th:if="${taskName=='工程报价' && returnFlowFlag==3 }" value="5">技术部领导</option>
                                    </select>
                                </div>
                                </div>
                            </div>
                    </div>
                    </div>

                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12  " disabled style="position: relative;bottom: 40px;left: 60%;">
                        <button   type="button" class="btn btn-s-xs greenbtn getModelResultMethod" th:if="${taskName=='技术部成本组' && flag == 1}" onclick="chooseLeverageBom()">批量设置BOM</button>
<!--                        <button   type="button" class="btn btn-s-xs greenbtn getModelResultMethod" th:if="${taskName=='技术部领导' && flag == 1}" onclick="getManufacturingCosts()">获取制造费用</button>-->
                        <button   type="button" class="btn btn-s-xs greenbtn getModelResultMethod" th:if="${taskName=='技术部工艺组' && flag == 1}" onclick="getPersonCost()">获取人工费用</button>
                        <button   type="button" class="btn btn-s-xs greenbtn getModelResultMethod" th:classappend="${getModelResultMethod ==null ||getModelResultMethod !=null && getModelResultMethod==0 }?'':'hidden'" th:if="${taskName=='技术部成本组' && flag == 1}" onclick="getModelResult()">获取报价</button>
                        <button  th:if="${flag == 1}" type="button" class="btn btn-s-xs defaultbtn flowProcessMethod1" th:classappend="${flowProcessMethod1 ==null ||flowProcessMethod1 !=null && flowProcessMethod1==0 }?'':'hidden'" onclick="flowProcess(1)">提交</button>
                        <button  th:if="${count==0 && flag == 1}" type="button" class="btn btn-s-xs defaultbtn flowProcessMethod0" th:classappend="${flowProcessMethod0 ==null ||flowProcessMethod0 !=null && flowProcessMethod0==0 }?'':'hidden'" onclick="flowProcess(0)">驳回</button>
                        <button   class="btn btn-s-xs btn-gray backMethod" th:classappend="${backMethod ==null ||backMethod !=null && backMethod==0 }?'':'hidden'" onclick="back()">返回</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="display: none;">
        <a id="exportExcel"></a>
    </div>

    <!--0:电脑版；1：手机版；2：pad版-->
    <input id="bwType" th:value="${bwType}" class="hidden"/>

    <input id="returnCode" th:if="${returnCode!=null}"  th:value="${returnCode}" class="hidden"/>
    <input id="forModelCodeMiddle" th:if="${forModelCodeMiddle!=null}"  th:value="${forModelCodeMiddle}" class="hidden"/>

    <input id="taskName" th:if="${taskName!=null}"  th:value="${taskName}" class="hidden"/>

    <!--0:为批量审核；1：为非批量审核-->
    <input id="disableFlag" th:if="${disableFlag!=null}"  th:value="${disableFlag}" class="hidden"/>

    <input id="craftVersionsHtml" th:if="${craftVersionsHtml!=null}"  th:value="${craftVersionsHtml}" class="hidden"/>

    <input id="craftVersionsValue" class="hidden"/>

    <input id="chooseFlag" value="0" class="hidden"/>

    <input id="baseChooseFlag" value="0" class="hidden"/>
    <input id="companyChooseFlag" value="0" class="hidden"/>


    <!--表单选模型是用于存放模型相关的中间变了-->
    <input id="bomcode"  class="hidden"/>
    <input id="bomname"  class="hidden"/>

    <!--表单选生产基地是用于存放生产基地相关的中间变了-->
    <input id="baseCode"  class="hidden"/>
    <input id="baseName"  class="hidden"/>

    <!--表单选组织是用于存放组织相关的中间变了-->
    <input id="companyName"  class="hidden"/>
    <input id="companyCode"  class="hidden"/>

    <!--存放文件的临时数据-->
    <input id="fileNamesAndIds"  value="" class="hidden"/>
    <!--存放文件的临时数据-->
    <input id="fileIds"  value="" class="hidden"/>

    <input id="count" th:value="${count}" class="hidden"/> <!--0:单挑审核，可驳回；1：多条审核只能批量审核通过，没有驳回操作-->

    <input id="returnFlowFlag"  th:value="${returnFlowFlag}" class="hidden"/>

    <input id="parameterString"  class="hidden"/> <!--存放模型参数-->

    <input id="flag"  th:value="${flag}" class="hidden"/><!--flag:0：查看；1：审核-->

    <input id="listCode"  th:value="${listCode}" class="hidden"/>

    <input id="menuid"  th:value="${menuid}" class="hidden"/>
    <input id="uploadFileMethod0"   th:value="${uploadFileMethod0}" class="hidden"/>
    <input id="viewModelMassageMethod1"   th:value="${viewModelMassageMethod1}" class="hidden"/>
    <input id="viewModelMassageMethod0"   th:value="${viewModelMassageMethod0}" class="hidden"/>
    <input id="uploadFileMethod1"   th:value="${uploadFileMethod1}" class="hidden"/>
    <input id="showBomDetailMethod1"   th:value="${showBomDetailMethod1}" class="hidden"/>
    <input id="showBomDetailMethod2"   th:value="${showBomDetailMethod2}" class="hidden"/>
    <input id="showBomDetailMethod3"   th:value="${showBomDetailMethod3}" class="hidden"/>

    <input id="bomTypeOneHtml"   th:value="${bomTypeOneHtml}" class="hidden"/>

    <!--body wrapper end-->
    <!--footer section start-->
    <div class="navbar" th:replace="Menu/footer::footer"></div>
    <!--footer section end-->
</div>

<script type="text/javascript" th:src="@{/static/layui/layui.js}"></script>
<script type="text/javascript" th:src="@{/static/js/jQuery/jquery.min.js}"></script>
<script th:src="@{/static/js/jquery-1.10.2.min.js}"></script>

<script th:src="@{/static/js/iscroll-zoom.js}" type="text/javascript" ></script>
<script th:src="@{/static/js/hammer.js}" type="text/javascript" ></script>
<script th:src="@{/static/js/lrz.all.bundle.js}" type="text/javascript" ></script>
<script th:src="@{/static/js/jquery.photoClip.min.js}" type="text/javascript"></script>

<script th:src="@{/static/js/jquery-ui-1.9.2.custom.min.js}"></script>
<script th:src="@{/static/js/jquery-migrate-1.2.1.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/bootstrap/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/bootstrap/bootstrap-table.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/bootstrap/bootstrap-table-export.js}"></script>
<script type="text/javascript" th:src="@{/static/js/bootstrap/bootstrap-table-zh-CN.js}"></script>


<script th:src="@{/static/js/modernizr.min.js}"></script>
<script th:src="@{/static/js/jquery.nicescroll.js}"></script>

<!--common scripts for all pages-->
<script th:src="@{/static/js/scripts.js}"></script>
<script th:src="@{/static/js/app.js}"></script>
<script th:src="@{/static/js/Bom/BomInit.js}"></script>
<script th:src="@{/static/js/yexu.js}"></script>
<script type="text/javascript" src="${ctx }/layui/layui.js"></script>
<script th:src="@{/static/js/Process/quotationProcessReview.js}"></script>

</body>
</html>
